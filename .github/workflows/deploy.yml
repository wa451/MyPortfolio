# é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ GitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
name: Deploy static content to Pages

on:
  # å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒãƒ—ãƒƒã‚·ãƒ¥æ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™
  push:
    branches: ['MyPortfolio'] ğŸ‘ˆï¸ ãƒ—ãƒƒã‚·ãƒ¥å…ˆã®ãƒ–ãƒ©ãƒ³ãƒæŒ‡å®š

  # Actions ã‚¿ãƒ–ã‹ã‚‰æ‰‹å‹•ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™
  workflow_dispatch:

# GITHUB_TOKEN ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ã€GitHub Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨±å¯ã—ã¾ã™
permissions:
  contents: read
  pages: write
  id-token: write

# 1 ã¤ã®åŒæ™‚ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’å¯èƒ½ã«ã™ã‚‹
concurrency:
  group: 'pages'
  cancel-in-progress: true

jobs:
  # ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ãªã®ã§ã€å˜ä¸€ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¸ãƒ§ãƒ–
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Set up Node
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      - name: Install dependencies
        run: npm ci
      - name: Build
        run: npm run build
      - name: Setup Pages
        uses: actions/configure-pages@v4
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # dist ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
          path: './dist'
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4